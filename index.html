<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Juju - Product Designer</title>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
   <script src="https://cdn.tailwindcss.com"></script>
   <style>
      @keyframes fall {
         0% {
            opacity: 0;
            transform: translateY(-100vh);
         }

         15% {
            opacity: 1;
         }

         100% {
            opacity: 1;
            transform: translateY(0);
         }
      }

      @keyframes wiggle {

         0%,
         100% {
            transform: rotate(0deg);
         }

         25% {
            transform: rotate(-8deg);
         }

         50% {
            transform: rotate(8deg);
         }

         75% {
            transform: rotate(-4deg);
         }
      }

      @keyframes pulse {

         0%,
         100% {
            opacity: 1;
         }

         50% {
            opacity: 0.7;
         }
      }

      @keyframes tooltipFadeIn {
         0% {
            opacity: 0;
            transform: translate(-50%, 4px);
         }

         100% {
            opacity: 1;
            transform: translate(-50%, 0);
         }
      }

      @keyframes tooltipFadeOut {
         0% {
            opacity: 1;
            transform: translate(-50%, 0);
         }

         100% {
            opacity: 0;
            transform: translate(-50%, 4px);
         }
      }

      .tooltip-fade-in {
         animation: tooltipFadeIn 0.3s ease-out forwards;
      }

      .tooltip-fade-out {
         animation: tooltipFadeOut 0.3s ease-out forwards;
      }
   </style>
</head>

<body>
   <div id="root"></div>
   <script type="text/babel">
      const { useState, useRef, useEffect, useMemo, createContext, useContext } = React;
      const isTouchDevice = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
      const TooltipContext = createContext({ showTouchTooltips: false, tooltipFading: false, tooltipPetalId: null, tooltipLeafId: null });

      function TooltipBubble({ text, show, isFading }) {
         if (!show && !isFading) return null;
         const cls = isFading ? 'tooltip-fade-out' : 'tooltip-fade-in';
         return <div className={`absolute -top-6 left-1/2 text-[10px] bg-white/90 px-2 py-0.5 rounded-full border border-stone-200 shadow text-stone-600 whitespace-nowrap pointer-events-none z-50 ${cls}`}>{text}</div>;
      }

      function Petal({ type, color, colorLight, size, rotation, style, onMouseDown, onTouchStart, onDoubleClick, tooltipText, pieceId }) {
         const [hovered, setHovered] = useState(false);
         const ctx = useContext(TooltipContext);
         const isLeaf = type === 'leaf' || type === 'roundleaf';
         const shouldShowMobile = isLeaf ? (pieceId === ctx.tooltipLeafId) : (pieceId === ctx.tooltipPetalId);
         const showTooltip = isTouchDevice ? (shouldShowMobile && (ctx.showTouchTooltips || ctx.tooltipFading)) : hovered;
         const isFading = isTouchDevice && shouldShowMobile && ctx.tooltipFading;

         const paths = {
            heart: { vb: "0 0 60 66", w: size, h: size * 1.1, d: "M30 62 Q20 58 12 48 Q4 38 4 28 Q4 18 12 12 Q20 6 30 10 Q40 6 48 12 Q56 18 56 28 Q56 38 48 48 Q40 58 30 62Z" },
            pointed: { vb: "0 0 42 96", w: size * 0.7, h: size * 1.6, d: "M21 2 Q28 15 34 30 Q40 45 40 60 Q40 75 34 84 Q28 92 21 94 Q14 92 8 84 Q2 75 2 60 Q2 45 8 30 Q14 15 21 2Z" },
            round: { vb: "0 0 60 63", w: size, h: size * 1.05, d: "M30 60 Q18 58 10 48 Q2 38 2 28 Q2 14 16 6 Q30 0 44 6 Q58 14 58 28 Q58 38 50 48 Q42 58 30 60Z" },
            small: { vb: "0 0 36 60", w: size * 0.6, h: size, d: "M18 56 Q8 50 4 38 Q0 26 6 14 Q12 4 18 2 Q24 4 30 14 Q36 26 32 38 Q28 50 18 56Z" },
            leaf: { vb: "0 0 100 45", w: size, h: size * 0.45, d: "M2 22 Q15 8 30 5 Q50 2 70 5 Q85 8 98 22 Q85 36 70 40 Q50 43 30 40 Q15 36 2 22Z" },
            roundleaf: { vb: "0 0 70 49", w: size, h: size * 0.7, d: "M4 24 Q4 10 20 5 Q35 2 50 5 Q66 10 66 24 Q66 38 50 44 Q35 47 20 44 Q4 38 4 24Z" }
         };
         const p = paths[type];
         const gid = `g-${type}-${color.replace('#', '')}-${size}`;

         return (
            <div style={{ ...style, transition: 'transform 0.3s ease' }} onMouseDown={onMouseDown} onTouchStart={onTouchStart} onDoubleClick={onDoubleClick} onMouseEnter={() => setHovered(true)} onMouseLeave={() => setHovered(false)} className="absolute select-none">
               <TooltipBubble text={tooltipText} show={showTooltip} isFading={isFading} />
               <svg viewBox={p.vb} style={{ width: p.w, height: p.h, transform: `rotate(${rotation}deg)`, transition: 'transform 0.3s ease', animation: hovered && !isTouchDevice ? 'wiggle 0.4s' : 'none' }}>
                  <defs>
                     {isLeaf ? (
                        <linearGradient id={gid} x1="0%" y1="50%" x2="100%" y2="50%">
                           <stop offset="0%" stopColor="#1B8A4E" />
                           <stop offset="50%" stopColor={color} />
                           <stop offset="100%" stopColor="#1B8A4E" />
                        </linearGradient>
                     ) : (
                        <radialGradient id={gid} cx="50%" cy="80%" r="70%">
                           <stop offset="0%" stopColor={colorLight} />
                           <stop offset="100%" stopColor={color} />
                        </radialGradient>
                     )}
                  </defs>
                  <path d={p.d} fill={`url(#${gid})`} />
                  {type === 'leaf' && <path d="M8 22 L92 22" stroke="rgba(255,255,255,0.35)" strokeWidth="1.5" fill="none" />}
               </svg>
            </div>
         );
      }

      const GARDEN_COLORS = [
         { name: 'Dark Green', value: '#2D5A27' },
         { name: 'Light Green', value: '#5B8C5A' },
         { name: 'Brown', value: '#6B4423' },
         { name: 'Yellow', value: '#E8C547' },
         { name: 'Purple', value: '#7B4B94' },
         { name: 'Pink', value: '#D4739D' },
         { name: 'Blue', value: '#4A7B9D' },
         { name: 'Red', value: '#C44536' },
      ];

      function DrawingCanvas({ onSave, onCancel }) {
         const canvasRef = useRef(null);
         const [isDrawing, setIsDrawing] = useState(false);
         const [color, setColor] = useState(GARDEN_COLORS[0].value);
         const [brushSize, setBrushSize] = useState(5);
         const [message, setMessage] = useState('');
         const lastPos = useRef(null);

         useEffect(() => {
            const canvas = canvasRef.current;
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#f5f5dc';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
         }, []);

         function getPos(e) {
            const canvas = canvasRef.current;
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            if (e.touches && e.touches[0]) return { x: (e.touches[0].clientX - rect.left) * scaleX, y: (e.touches[0].clientY - rect.top) * scaleY };
            return { x: (e.clientX - rect.left) * scaleX, y: (e.clientY - rect.top) * scaleY };
         }

         function drawLine(ctx, x1, y1, x2, y2) {
            const dist = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
            const steps = Math.max(1, Math.floor(dist / 2));
            for (let i = 0; i <= steps; i++) {
               const t = i / steps, x = x1 + (x2 - x1) * t, y = y1 + (y2 - y1) * t;
               for (let j = 0; j < 3 + brushSize; j++) {
                  const ox = (Math.random() - 0.5) * brushSize * 1.5, oy = (Math.random() - 0.5) * brushSize * 1.5;
                  ctx.beginPath();
                  ctx.arc(x + ox, y + oy, Math.random() * 1.2, 0, Math.PI * 2);
                  ctx.fillStyle = color + Math.floor((0.3 + Math.random() * 0.5) * 255).toString(16).padStart(2, '0');
                  ctx.fill();
               }
            }
         }

         function startDrawing(e) {
            e.preventDefault();
            const pos = getPos(e);
            const ctx = canvasRef.current && canvasRef.current.getContext('2d');
            if (!ctx) return;
            setIsDrawing(true);
            lastPos.current = pos;
            drawLine(ctx, pos.x, pos.y, pos.x, pos.y);
         }

         function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            const pos = getPos(e);
            const ctx = canvasRef.current && canvasRef.current.getContext('2d');
            if (ctx && lastPos.current) drawLine(ctx, lastPos.current.x, lastPos.current.y, pos.x, pos.y);
            lastPos.current = pos;
         }

         function stopDrawing() { setIsDrawing(false); lastPos.current = null; }

         function clearCanvas() {
            const ctx = canvasRef.current && canvasRef.current.getContext('2d');
            if (ctx) { ctx.fillStyle = '#f5f5dc'; ctx.fillRect(0, 0, 280, 280); }
         }

         function handleSave() {
            const canvas = canvasRef.current;
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            for (let i = 0; i < data.length; i += 4) {
               const r = data[i], g = data[i + 1], b = data[i + 2];
               if (Math.abs(r - 245) < 15 && Math.abs(g - 245) < 15 && Math.abs(b - 220) < 15) data[i + 3] = 0;
            }
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            tempCanvas.getContext('2d').putImageData(imageData, 0, 0);
            onSave(tempCanvas.toDataURL('image/png'), message);
         }

         return (
            <div className="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4">
               <div className="bg-stone-50 rounded-2xl p-4 max-w-md w-full shadow-2xl border border-stone-200">
                  <h2 className="text-xl font-light text-stone-700 mb-3 text-center">Draw Your Flower</h2>
                  <div className="bg-white rounded-xl p-2 shadow-inner mb-3">
                     <canvas ref={canvasRef} width={280} height={280} className="w-full aspect-square rounded-lg cursor-crosshair" style={{ touchAction: 'none' }} onMouseDown={startDrawing} onMouseMove={draw} onMouseUp={stopDrawing} onMouseLeave={stopDrawing} onTouchStart={startDrawing} onTouchMove={draw} onTouchEnd={stopDrawing} />
                  </div>
                  <div className="mb-3 flex items-center gap-2 flex-wrap justify-center">
                     {GARDEN_COLORS.map((c) => (
                        <button key={c.value} onClick={() => setColor(c.value)} className={`w-8 h-8 rounded-full transition-all ${color === c.value ? 'ring-2 ring-offset-2 ring-stone-500 scale-110' : 'hover:scale-105'}`} style={{ backgroundColor: c.value, boxShadow: 'inset 0 2px 4px rgba(0,0,0,0.2)' }} />
                     ))}
                  </div>
                  <div className="mb-4 flex items-center justify-center gap-3">
                     <span className="text-sm text-stone-500">Thin</span>
                     <input type="range" min="4" max="10" value={brushSize} onChange={(e) => setBrushSize(parseInt(e.target.value))} className="w-32 accent-stone-500" />
                     <span className="text-sm text-stone-500">Thick</span>
                  </div>
                  <div className="mb-3">
                     <input type="text" value={message} onChange={(e) => setMessage(e.target.value.slice(0, 100))} placeholder="Leave a message (optional)" className="w-full px-3 py-2 border border-stone-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-stone-400 bg-white" maxLength={100} />
                  </div>
                  <div className="flex gap-2">
                     <button onClick={onCancel} className="flex-1 py-2 rounded-lg bg-stone-200 text-stone-600 hover:bg-stone-300 text-sm">Cancel</button>
                     <button onClick={clearCanvas} className="flex-1 py-2 rounded-lg bg-stone-100 text-stone-600 hover:bg-stone-200 text-sm">Clear</button>
                     <button onClick={handleSave} className="flex-1 py-2 rounded-lg bg-stone-800 text-white hover:bg-stone-700 text-sm font-medium">Plant It!</button>
                  </div>
               </div>
            </div>
         );
      }

      function HandDrawnLawn() {
         const backBlades = useMemo(() => {
            const arr = [];
            for (let i = 0; i < 260; i++) {
               const x = Math.random() * 100, r = Math.random(), y = 32 + (r * r) * 40;
               arr.push({ x, y, height: 10 + Math.random() * 22, curve: (Math.random() - 0.5) * 18, color: Math.random() > 0.5 ? '#2D5A27' : '#5B8C5A', width: 1 + Math.random() * 1.6, key: 'b-' + i });
            }
            return arr;
         }, []);

         const frontBlades = useMemo(() => {
            const arr = [];
            for (let i = 0; i < 520; i++) {
               const x = Math.random() * 100, r = Math.random(), y = 55 + (r * r) * 45;
               arr.push({ x, y, height: 18 + Math.random() * 55, curve: (Math.random() - 0.5) * 28, color: Math.random() > 0.5 ? '#2D5A27' : '#5B8C5A', width: 1.8 + Math.random() * 2.8, key: 'f-' + i });
            }
            return arr;
         }, []);

         return (
            <React.Fragment>
               <svg className="absolute inset-0 w-full h-full pointer-events-none" style={{ zIndex: 1 }}>
                  {backBlades.map((b) => <path key={b.key} d={`M ${b.x}% ${b.y}% q ${b.curve * 0.3}% ${-b.height * 0.5}% ${b.curve * 0.5}% ${-b.height}%`} stroke={b.color} strokeWidth={b.width} fill="none" strokeLinecap="round" opacity={0.25 + (b.y / 100) * 0.35} />)}
               </svg>
               <svg className="absolute inset-0 w-full h-full pointer-events-none" style={{ zIndex: 2 }}>
                  {frontBlades.map((b) => <path key={b.key} d={`M ${b.x}% ${b.y}% q ${b.curve * 0.3}% ${-b.height * 0.5}% ${b.curve * 0.5}% ${-b.height}%`} stroke={b.color} strokeWidth={b.width} fill="none" strokeLinecap="round" opacity={0.35 + (b.y / 100) * 0.45} />)}
               </svg>
            </React.Fragment>
         );
      }

      function PlantedFlower({ flower, onClick }) {
         return (
            <div className="absolute cursor-pointer transition-transform hover:scale-110 group" style={{ left: flower.x, top: flower.y, transform: 'translate(-50%, -100%)', zIndex: 10 }} onClick={() => onClick(flower)}>
               {flower.message && <div className="absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-2 py-1 bg-white/95 rounded-lg shadow-md text-xs text-stone-600 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity max-w-32 truncate border border-stone-200">&quot;{flower.message}&quot;</div>}
               <img src={flower.drawing} alt="flower" className="w-16 h-16 object-contain" style={{ filter: 'drop-shadow(2px 2px 2px rgba(0,0,0,0.2))' }} />
            </div>
         );
      }

      function GardenSection() {
         const [flowers, setFlowers] = useState([]);
         const [loading, setLoading] = useState(true);
         const [showDrawing, setShowDrawing] = useState(false);
         const [pendingDrawing, setPendingDrawing] = useState(null);
         const [pendingMessage, setPendingMessage] = useState('');
         const [selectedFlower, setSelectedFlower] = useState(null);
         const gardenRef = useRef(null);

         useEffect(() => {
            async function load() {
               try {
                  const result = await window.storage.list('dflower:', true);
                  if (result && result.keys) {
                     const loaded = [];
                     for (const key of result.keys.slice(0, 50)) {
                        try {
                           const data = await window.storage.get(key, true);
                           if (data && data.value) loaded.push(JSON.parse(data.value));
                        } catch (e) { }
                     }
                     setFlowers(loaded);
                  }
               } catch (e) { }
               setLoading(false);
            }
            load();
         }, []);

         function handleSave(dataUrl, msg) {
            setPendingDrawing(dataUrl);
            setPendingMessage(msg);
            setShowDrawing(false);
         }

         function plantFlower(e) {
            if (!gardenRef.current || !pendingDrawing) return;
            const rect = gardenRef.current.getBoundingClientRect();
            const clientX = e.clientX !== undefined ? e.clientX : (e.changedTouches && e.changedTouches[0] ? e.changedTouches[0].clientX : null);
            const clientY = e.clientY !== undefined ? e.clientY : (e.changedTouches && e.changedTouches[0] ? e.changedTouches[0].clientY : null);
            if (clientX === null) return;
            const x = clientX - rect.left, y = clientY - rect.top;
            if (y < 60) return;
            const flower = {
               id: Date.now() + '-' + Math.random().toString(36).substr(2, 9),
               drawing: pendingDrawing,
               message: pendingMessage,
               x: x,
               y: y,
               plantedAt: new Date().toISOString()
            };
            try {
               window.storage.set('dflower:' + flower.id, JSON.stringify(flower), true);
            } catch (e) { }
            setFlowers(function (prev) { return prev.concat([flower]); });
            setPendingDrawing(null);
            setPendingMessage('');
         }

         return (
            <section className="px-4 sm:px-8 md:px-16 py-16 sm:py-24" style={{ backgroundColor: '#FAF9F6' }}>
               <div className="text-center mb-8">
                  <h2 className="text-2xl md:text-3xl font-light text-stone-800 mb-2">Since you're still here...</h2>
                  <p className="text-stone-400 text-sm">Leave a flower on my lawn </p>
               </div>
               <div ref={gardenRef} className="relative w-full h-96 rounded-2xl overflow-hidden border border-stone-200" style={{ backgroundColor: '#f9f6f1', cursor: pendingDrawing ? 'crosshair' : 'default' }} onClick={pendingDrawing ? plantFlower : undefined} onTouchEnd={pendingDrawing ? plantFlower : undefined}>
                  <HandDrawnLawn />
                  <button onClick={function () { setShowDrawing(true); }} className="absolute top-4 right-4 z-20 bg-white/90 hover:bg-white px-4 py-2 rounded-full shadow font-medium text-stone-600 transition-all hover:scale-105 border border-stone-200 text-sm">锔 Draw a Flower</button>
                  <div className="absolute top-4 left-4 z-20 bg-white/90 px-3 py-1 rounded-full text-sm text-stone-500 border border-stone-200">{flowers.length} flowers</div>
                  {pendingDrawing && <div className="absolute top-16 left-1/2 -translate-x-1/2 bg-white/95 text-stone-600 px-4 py-2 rounded-full shadow text-sm border border-stone-200 z-20" style={{ animation: 'pulse 2s infinite' }}>Click anywhere to plant your flower!</div>}
                  <div className="absolute inset-0" style={{ zIndex: 5 }}>
                     {loading ? <div className="absolute inset-0 flex items-center justify-center"><div className="text-stone-400 text-sm">Loading garden...</div></div> : flowers.map(function (f) { return <PlantedFlower key={f.id} flower={f} onClick={setSelectedFlower} />; })}
                  </div>
               </div>
               {showDrawing && <DrawingCanvas onSave={handleSave} onCancel={function () { setShowDrawing(false); }} />}
               {selectedFlower && (
                  <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onClick={function () { setSelectedFlower(null); }}>
                     <div className="bg-stone-50 rounded-2xl p-6 max-w-xs w-full shadow-2xl text-center" onClick={function (e) { e.stopPropagation(); }}>
                        <img src={selectedFlower.drawing} alt="flower" className="w-40 h-40 mx-auto object-contain" />
                        {selectedFlower.message && <p className="mt-4 text-stone-600 italic text-lg">&quot;{selectedFlower.message}&quot;</p>}
                        <p className="mt-3 text-xs text-stone-400">Planted {new Date(selectedFlower.plantedAt).toLocaleDateString()}</p>
                        <button onClick={function () { setSelectedFlower(null); }} className="mt-4 px-4 py-2 bg-stone-200 rounded-lg text-stone-600 hover:bg-stone-300 text-sm">Close</button>
                     </div>
                  </div>
               )}
            </section>
         );
      }

      function App() {
         const [positions, setPositions] = useState({});
         const [rotations, setRotations] = useState({});
         const [dragging, setDragging] = useState(null);
         const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });
         const [animDone, setAnimDone] = useState({});
         const [flowers, setFlowers] = useState([]);
         const [flowerCtr, setFlowerCtr] = useState(0);
         const [removed, setRemoved] = useState({});
         const [showTouchTooltips, setShowTouchTooltips] = useState(false);
         const [tooltipFading, setTooltipFading] = useState(false);
         const heroRef = useRef(null);
         const [heroSize, setHeroSize] = useState({ width: 0, height: 0 });
         const [isMobile, setIsMobile] = useState(window.innerWidth < 640);
         const lastTap = useRef({ id: null, time: 0 });

         useEffect(function () {
            if (isTouchDevice) {
               var showTimer = setTimeout(function () { setShowTouchTooltips(true); }, 3200);
               var fadeTimer = setTimeout(function () { setTooltipFading(true); setShowTouchTooltips(false); }, 8200);
               var hideTimer = setTimeout(function () { setTooltipFading(false); }, 8500);
               return function () { clearTimeout(showTimer); clearTimeout(fadeTimer); clearTimeout(hideTimer); };
            }
         }, []);

         var pieces = [
            { id: 'p1', type: 'heart', color: '#C41E6A', colorLight: '#FFE4EC', size: 75, rotation: -20, fp: { x: 5, y: 15 } },
            { id: 'p2', type: 'pointed', color: '#E84A1B', colorLight: '#FFCC4D', size: 70, rotation: 15, fp: { x: 75, y: 10 } },
            { id: 'p3', type: 'round', color: '#D63B8E', colorLight: '#FFEEF4', size: 60, rotation: 25, fp: { x: 60, y: 55 } },
            { id: 'p4', type: 'heart', color: '#8B2D87', colorLight: '#F5E6F5', size: 55, rotation: -10, fp: { x: 85, y: 30 } },
            { id: 'p5', type: 'small', color: '#E85A8F', colorLight: '#FFF0F5', size: 50, rotation: 35, fp: { x: 20, y: 70 } },
            { id: 'p6', type: 'round', color: '#F5C842', colorLight: '#FFFDE7', size: 80, rotation: -5, fp: { x: 80, y: 65 } },
            { id: 'l1', type: 'leaf', color: '#22B573', size: 100, rotation: -15, fp: { x: 3, y: 55 } },
            { id: 'l2', type: 'roundleaf', color: '#2ECC71', size: 70, rotation: 20, fp: { x: 50, y: 75 } },
            { id: 'l3', type: 'leaf', color: '#27AE60', size: 80, rotation: 10, fp: { x: 25, y: 35 } },
            { id: 'l4', type: 'roundleaf', color: '#22B573', size: 55, rotation: -25, fp: { x: 90, y: 50 } },
         ];

         var projects = [
            { name: 'Influencer CRM', tags: ['Product Design', 'B2B SaaS'], desc: 'End-to-end CRM feature for managing influencer relationships.', color: '#22B573', link: 'igfcrm.html' },
            { name: 'Speed Match NYC', tags: ['UX Research', 'Mobile App'], desc: 'Speed dating app connecting NYC singles.', color: '#D63B8E', link: 'null.html' },
            { name: 'Scan2Sell', tags: ['App Redesign', 'UI/UX'], desc: 'Interface overhaul for a product scanning app.', color: '#E84A1B', link: 'null.html' },
            { name: 'Favors', tags: ['Product Design', 'Social'], desc: 'Community platform for neighbors to exchange favors.', color: '#F5C842', link: 'favors.html' },
         ];

         var hobbies = [
            { name: 'Floral Arrangements', color: '#D63B8E', img: 'index_png/ikebanaEmoji.png' },
            { name: 'Oil Painting', color: '#E84A1B', img: 'index_png/oilpaintingEmoji.png' },
            { name: 'Sourdough Baking', color: '#F5C842', img: 'index_png/sourdoughEmoji.png' }
         ];

         useEffect(function () {
            function update() {
               if (heroRef.current) {
                  var r = heroRef.current.getBoundingClientRect();
                  setHeroSize({ width: r.width, height: r.height });
               }
            }
            update();
            window.addEventListener('resize', update);
            return function () { window.removeEventListener('resize', update); };
         }, []);

         useEffect(function () {
            var mq = window.matchMedia('(max-width: 640px)');
            setIsMobile(mq.matches);
            function h() { setIsMobile(mq.matches); }
            if (mq.addEventListener) mq.addEventListener('change', h);
            else if (mq.addListener) mq.addListener(h);
            return function () {
               if (mq.removeEventListener) mq.removeEventListener('change', h);
               else if (mq.removeListener) mq.removeListener(h);
            };
         }, []);

         useEffect(function () {
            if (heroSize.width === 0) return;
            var init = {}, initR = {};
            pieces.forEach(function (p) {
               init[p.id] = { x: (p.fp.x / 100) * heroSize.width, y: (p.fp.y / 100) * heroSize.height };
               initR[p.id] = p.rotation;
            });
            setPositions(init);
            setRotations(initR);
            var ts = pieces.map(function (p, i) {
               return setTimeout(function () { setAnimDone(function (pr) { var n = {}; for (var k in pr) n[k] = pr[k]; n[p.id] = true; return n; }); }, 100 + i * 200 + 2800);
            });
            return function () { ts.forEach(clearTimeout); };
         }, [heroSize]);

         function getSize(p) {
            if (heroSize.width < 640) return p.size * 0.6;
            if (heroSize.width < 1024) return p.size * 0.8;
            return p.size;
         }

         function doubleTapAction(id, piece) {
            var isLeaf = piece.type === 'leaf' || piece.type === 'roundleaf';
            if (isLeaf) {
               setRotations(function (pr) { var n = {}; for (var k in pr) n[k] = pr[k]; n[id] = (pr[id] || 0) + 45; return n; });
               return;
            }
            var pos = positions[id] || { x: (piece.fp.x / 100) * heroSize.width, y: (piece.fp.y / 100) * heroSize.height };
            var newF = {
               id: 'flower-' + flowerCtr,
               x: pos.x,
               y: pos.y,
               petalCount: 5 + Math.floor(Math.random() * 3),
               color: piece.color,
               colorLight: piece.colorLight,
               size: getSize(piece),
               type: piece.type
            };
            setFlowers(function (pr) { return pr.concat([newF]); });
            setFlowerCtr(function (pr) { return pr + 1; });
            setRemoved(function (pr) { var n = {}; for (var k in pr) n[k] = pr[k]; n[id] = true; return n; });
         }

         function handleMouseDown(e, id) {
            e.preventDefault();
            var r = e.currentTarget.getBoundingClientRect();
            setDragOffset({ x: e.clientX - r.left, y: e.clientY - r.top });
            setDragging(id);
            setAnimDone(function (pr) { var n = {}; for (var k in pr) n[k] = pr[k]; n[id] = true; return n; });
         }

         function handleTouchStart(e, id, piece) {
            var t = e.touches && e.touches[0];
            if (!t) return;
            var now = Date.now(), last = lastTap.current;
            if (last.id === id && (now - last.time) < 280) {
               e.preventDefault();
               lastTap.current = { id: null, time: 0 };
               doubleTapAction(id, piece);
               return;
            }
            e.preventDefault();
            var r = e.currentTarget.getBoundingClientRect();
            setDragOffset({ x: t.clientX - r.left, y: t.clientY - r.top });
            setDragging(id);
            setAnimDone(function (pr) { var n = {}; for (var k in pr) n[k] = pr[k]; n[id] = true; return n; });
            lastTap.current = { id: id, time: now };
         }

         function handleTouchMove(e) {
            if (!dragging || !heroRef.current) return;
            var t = e.touches && e.touches[0];
            if (!t) return;
            e.preventDefault();
            var r = heroRef.current.getBoundingClientRect();
            var newP = { x: t.clientX - r.left - dragOffset.x, y: t.clientY - r.top - dragOffset.y };
            if (String(dragging).indexOf('flower-') === 0) {
               setFlowers(function (pr) { return pr.map(function (f) { return f.id === dragging ? Object.assign({}, f, { x: newP.x, y: newP.y }) : f; }); });
            } else {
               setPositions(function (pr) { var n = {}; for (var k in pr) n[k] = pr[k]; n[dragging] = newP; return n; });
            }
         }

         function handleMouseMove(e) {
            if (!dragging || !heroRef.current) return;
            var r = heroRef.current.getBoundingClientRect();
            var newP = { x: e.clientX - r.left - dragOffset.x, y: e.clientY - r.top - dragOffset.y };
            if (String(dragging).indexOf('flower-') === 0) {
               setFlowers(function (pr) { return pr.map(function (f) { return f.id === dragging ? Object.assign({}, f, { x: newP.x, y: newP.y }) : f; }); });
            } else {
               setPositions(function (pr) { var n = {}; for (var k in pr) n[k] = pr[k]; n[dragging] = newP; return n; });
            }
         }

         function handleEnd() { setDragging(null); }

         function handleFlowerTouch(e, fid) {
            e.preventDefault();
            var t = e.touches && e.touches[0];
            if (!t || !heroRef.current) return;
            var f = flowers.find(function (x) { return x.id === fid; });
            if (!f) return;
            var r = heroRef.current.getBoundingClientRect();
            setDragOffset({ x: t.clientX - r.left - f.x, y: t.clientY - r.top - f.y });
            setDragging(fid);
         }

         function handleFlowerMouse(e, fid) {
            e.preventDefault();
            var f = flowers.find(function (x) { return x.id === fid; });
            if (!f || !heroRef.current) return;
            var r = heroRef.current.getBoundingClientRect();
            setDragOffset({ x: e.clientX - r.left - f.x, y: e.clientY - r.top - f.y });
            setDragging(fid);
         }

         function renderPiece(p, i) {
            var pos = positions[p.id] || { x: (p.fp.x / 100) * heroSize.width, y: (p.fp.y / 100) * heroSize.height };
            var rot = rotations[p.id] !== undefined ? rotations[p.id] : p.rotation;
            var done = animDone[p.id], isDrag = dragging === p.id;
            var isLeaf = p.type === 'leaf' || p.type === 'roundleaf';
            var style = {
               left: done || isDrag ? pos.x : pos.x,
               top: done || isDrag ? pos.y : pos.y,
               zIndex: isDrag ? 100 : isLeaf ? 20 : 30,
               cursor: isDrag ? 'grabbing' : 'grab',
               animation: !done && !isDrag ? 'fall 2.8s ease-out ' + (0.1 + i * 0.2) + 's forwards' : 'none',
               touchAction: 'none',
               opacity: done || isDrag ? 1 : 0

            };
            return React.createElement(Petal, {
               key: p.id,
               pieceId: p.id,
               type: p.type,
               color: p.color,
               colorLight: p.colorLight,
               size: getSize(p),
               rotation: rot,
               style: style,
               tooltipText: isLeaf ? 'double tap to rotate' : 'double tap for a surprise',
               onMouseDown: function (e) { handleMouseDown(e, p.id); },
               onDoubleClick: function () { doubleTapAction(p.id, p); },
               onTouchStart: function (e) { handleTouchStart(e, p.id, p); }
            });
         }

         function renderFlower(f) {
            var isDrag = dragging === f.id;
            var base = f.size * (isMobile ? 0.7 : 1), sz = base * (isMobile ? 1.8 : 2.5);
            var petals = [];
            for (var i = 0; i < f.petalCount; i++) {
               var ang = (360 / f.petalCount) * i - 90;
               petals.push(
                  React.createElement('div', { key: i, style: { position: 'absolute', left: '50%', top: '50%', transform: 'translate(-50%, -100%) rotate(' + (ang + 90) + 'deg)', transformOrigin: 'center bottom' } },
                     React.createElement('svg', { viewBox: '0 0 60 66', style: { width: base * 0.9, height: base } },
                        React.createElement('defs', null,
                           React.createElement('radialGradient', { id: 'fg-' + f.id + '-' + i, cx: '50%', cy: '80%', r: '70%' },
                              React.createElement('stop', { offset: '0%', stopColor: f.colorLight }),
                              React.createElement('stop', { offset: '100%', stopColor: f.color })
                           )
                        ),
                        React.createElement('path', { d: 'M30 62 Q20 58 12 48 Q4 38 4 28 Q4 18 12 12 Q20 6 30 10 Q40 6 48 12 Q56 18 56 28 Q56 38 48 48 Q40 58 30 62Z', fill: 'url(#fg-' + f.id + '-' + i + ')' })
                     )
                  )
               );
            }
            return React.createElement('div', {
               key: f.id,
               className: 'absolute select-none',
               style: { left: f.x - sz / 2, top: f.y - sz / 2, width: sz, height: sz, zIndex: isDrag ? 100 : 40, cursor: isDrag ? 'grabbing' : 'grab', touchAction: 'none' },
               onMouseDown: function (e) { handleFlowerMouse(e, f.id); },
               onTouchStart: function (e) { handleFlowerTouch(e, f.id); }
            },
               React.createElement('div', { style: { position: 'relative', width: '100%', height: '100%' } },
                  petals,
                  React.createElement('div', { style: { position: 'absolute', left: '50%', top: '50%', transform: 'translate(-50%, -50%)', width: base * 0.3, height: base * 0.3, borderRadius: '50%', background: 'radial-gradient(circle at 30% 30%, #FFF6A5 0%, #FFE033 50%, #E6B800 100%)', zIndex: 10 } })
               )
            );
         }

         function WhatIWorkOnCard() {
            return (
               <div className="bg-white rounded-2xl border border-stone-200 p-5 shadow-sm">
                  <h3 className="text-base font-medium text-stone-800 mb-4">What I Work On</h3>
                  <div className="space-y-2 text-stone-600 text-sm">
                     <p>Product design across the full lifecycle, from discovery to delivery</p>
                     <p>Product-led interaction design and user flows</p>
                     <p>User research, usability testing, and insight synthesis</p>
                     <p>Design systems and scalable components</p>
                     <p>Experimentation and data informed iteration</p>
                     <p>Leveraging AI to support research, prototyping, and design workflows</p>
                  </div>
                  <div className="border-t border-stone-200 mt-4 pt-4">
                     <p className="text-xs font-medium text-stone-600 mb-1">Tools & Tech</p>
                     <p className="text-xs text-stone-400">Figma 路 FigJam 路 Framer 路 React 路 Python 路 SQL 路 Java 路 Jira 路 Google Analytics</p>
                  </div>
               </div>
            );
         }

         return (
            <TooltipContext.Provider value={{ showTouchTooltips: showTouchTooltips, tooltipFading: tooltipFading, tooltipPetalId: 'p1', tooltipLeafId: 'l1' }}>
               <div className="min-h-screen" style={{ backgroundColor: '#FAF9F6' }} onMouseMove={handleMouseMove} onMouseUp={handleEnd} onMouseLeave={handleEnd} onTouchMove={handleTouchMove} onTouchEnd={handleEnd} onTouchCancel={handleEnd}>
                  <nav className="fixed top-0 left-0 right-0 px-4 sm:px-8 md:px-16 py-4 sm:py-6 flex justify-between items-center z-50" style={{ backgroundColor: 'rgba(250,249,246,0.9)', backdropFilter: 'blur(12px)' }}>
                     <span className="text-stone-800 font-medium text-sm sm:text-base">Juju</span>
                     <div className="flex gap-4 sm:gap-8 text-xs sm:text-sm text-stone-400">
                        <a href="#work" className="hover:text-stone-700">Work</a>
                        <a href="visuals.html" className="hover:text-stone-700">Visuals</a>
                        <a href="#about" className="hover:text-stone-700">About</a>
                     </div>
                  </nav>

                  <section ref={heroRef} className="relative min-h-[80vh] flex items-center px-4 sm:px-8 md:px-16 overflow-hidden">
                     {pieces.filter(function (p) { return !removed[p.id]; }).map(function (p, i) { return renderPiece(p, i); })}
                     {flowers.map(function (f) { return renderFlower(f); })}
                     <div className="relative z-10 max-w-xl pt-8 sm:pt-12">
                        <p className="text-stone-400 text-base sm:text-lg md:text-xl mb-3 sm:mb-4">Hi, I'm Juju</p>
                        <h1 className="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-light text-stone-800 leading-tight tracking-tight mb-4 sm:mb-6">Product Designer<br /><span className="text-stone-400">Shipping practical UX<br />in real constraints</span></h1>
                        <p className="text-stone-500 text-sm sm:text-base leading-relaxed mb-4 sm:mb-6 max-w-md">I design within existing systems, tight timelines, and shifting priorities to simplify complex workflows, helping users complete tasks and teams make confident decisions.</p>
                        <p className="text-stone-500 text-sm sm:text-base leading-relaxed mb-6 sm:mb-8 max-w-md">Currently completing my MS in Information Systems at Northeastern University.</p>
                        <div className="mb-8">
                           <a href="mailto:fu.shih@northeastern.edu" className="inline-flex items-center gap-2 bg-stone-800 text-white px-4 sm:px-5 py-2 sm:py-2.5 rounded-full text-xs sm:text-sm hover:bg-stone-700">Get in touch</a>
                        </div>
                     </div>
                     <div className="absolute bottom-8 left-4 sm:left-8 md:left-16 flex items-center gap-2 text-stone-300 text-xs sm:text-sm z-10">
                        <svg className="w-3 h-3 sm:w-4 sm:h-4 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
                        Scroll to see work
                     </div>
                  </section>

                  <section id="work" className="px-4 sm:px-8 md:px-16 py-16 sm:py-24">
                     <h2 className="text-xl sm:text-2xl md:text-3xl font-light text-stone-800 mb-2 sm:mb-3">Selected Work</h2>
                     <div className="grid sm:grid-cols-2 gap-4 sm:gap-6">
                        {projects.map(function (pr, i) {
                           return (
                              <a key={i} href={pr.link} className="group bg-white rounded-xl sm:rounded-2xl overflow-hidden border border-stone-100 hover:border-stone-200 hover:shadow-lg transition-all cursor-pointer block">
                                 <div className="h-36 sm:h-48 md:h-56" style={{ backgroundColor: pr.color + '12' }}>
                                    <div className="w-full h-full flex items-center justify-center"><div className="w-10 h-10 sm:w-14 sm:h-14 rounded-lg sm:rounded-xl opacity-50" style={{ backgroundColor: pr.color }} /></div>
                                 </div>
                                 <div className="p-4 sm:p-6">
                                    <div className="flex gap-2 mb-2 sm:mb-3 flex-wrap">{pr.tags.map(function (tag, j) { return <span key={j} className="text-[10px] sm:text-xs px-2 sm:px-2.5 py-0.5 sm:py-1 rounded-full" style={{ backgroundColor: pr.color + '15', color: pr.color }}>{tag}</span>; })}</div>
                                    <h3 className="text-base sm:text-lg font-medium text-stone-800 mb-1 sm:mb-2 group-hover:text-stone-600">{pr.name}</h3>
                                    <p className="text-stone-500 text-xs sm:text-sm leading-relaxed">{pr.desc}</p>
                                 </div>
                              </a>
                           );
                        })}
                     </div>
                  </section>

                  <section id="about" className="px-4 sm:px-8 md:px-16 py-16 sm:py-24 bg-stone-50">
                     {/* MOBILE LAYOUT */}
                     <div className="md:hidden flex flex-col gap-6">
                        <h2 className="text-2xl font-light text-stone-800">About Me</h2>
                        <div className="flex flex-col items-center">
                           <div className="w-full max-w-sm h-80 rounded-2xl overflow-hidden border border-stone-200">
                              <img src="index_png/shihjuprofile.png" alt="Juju - Product Designer" className="w-full h-full object-cover" />
                           </div>
                           <h3 className="mt-4 text-lg font-medium text-stone-800">Shih-Ju "Juju" Fu</h3>
                           <div className="mt-3 flex items-center gap-3 flex-wrap justify-center">
                              <a href="https://drive.google.com/file/d/1Kfp2ui2orbGl-xPLTVLjLMSrF4FuFbaX/view" target="_blank" className="inline-flex items-center gap-2 bg-stone-800 text-white px-4 py-2 rounded-full text-xs hover:bg-stone-700">Resume</a>
                              <a href="https://linkedin.com/in/shihjufu" target="_blank" className="w-9 h-9 rounded-full border border-stone-200 flex items-center justify-center text-stone-600 hover:bg-stone-100">
                                 <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M4.98 3.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5ZM3 21h4V9H3v12Zm7 0h4v-6.2c0-3.3 4-3.6 4 0V21h4v-7.5c0-6.2-7-6-8-3V9h-4v12Z" /></svg>
                              </a>
                              <a href="mailto:fu.shih@northeastern.edu" className="w-9 h-9 rounded-full border border-stone-200 flex items-center justify-center text-stone-600 hover:bg-stone-100">
                                 <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="1.5"><rect x="2" y="4" width="20" height="16" rx="2" /><path d="m22 6-10 7L2 6" /></svg>
                              </a>
                           </div>
                        </div>
                        <div className="space-y-4 text-stone-500 leading-relaxed text-sm">
                           <p>I grew up in the expat community in Suzhou, China, surrounded by different cultures, languages, and creative influences. That early exposure shaped how I see the world and eventually led me to study design in the US.</p>
                           <p>I later moved to New York City, where I earned my BFA in Communication Design at Parsons School of Design. There, I learned design thinking as a way to approach problems, focusing on understanding people, embracing ambiguity, and turning complexity into clarity.</p>
                           <p>I'm now based in Oakland, California, completing my MS in Information Systems at Northeastern and exploring the technical side of building products.</p>
                        </div>
                        <div className="mt-2">
                           <h3 className="text-base font-light text-stone-700 mb-4">When I'm not on Figma...</h3>
                           <div className="flex gap-6">
                              {hobbies.map(function (h, i) {
                                 return (
                                    <div key={i} className="group text-center">
                                       <div className="w-14 h-14 mx-auto flex items-center justify-center transition-transform hover:scale-110">
                                          <img src={h.img} alt={h.name} className="w-full h-full object-contain" />
                                       </div>
                                       <p className="text-xs font-medium mt-2" style={{ color: h.color }}>{h.name}</p>
                                    </div>
                                 );
                              })}
                           </div>
                        </div>
                        <div className="mt-4">
                           <WhatIWorkOnCard />
                        </div>
                     </div>
                     {/* DESKTOP LAYOUT */}
                     <div className="hidden md:grid md:grid-cols-12 gap-8 md:gap-12">
                        <div className="md:col-span-3 flex flex-col items-start">
                           <div className="w-full h-72 rounded-2xl overflow-hidden border border-stone-200">
                              <img src="index_png/shihjuprofile.png" alt="Juju - Product Designer" className="w-full h-full object-cover" />
                           </div>
                           <h3 className="mt-4 text-lg font-medium text-stone-800">Shih-Ju "Juju" Fu</h3>
                           <div className="mt-3 flex items-center gap-3 flex-wrap">
                              <a href="https://drive.google.com/file/d/1Kfp2ui2orbGl-xPLTVLjLMSrF4FuFbaX/view" target="_blank" className="inline-flex items-center gap-2 bg-stone-800 text-white px-4 py-2 rounded-full text-xs hover:bg-stone-700">Resume</a>
                              <a href="https://linkedin.com/in/shihjufu" target="_blank" className="w-9 h-9 rounded-full border border-stone-200 flex items-center justify-center text-stone-600 hover:bg-stone-100">
                                 <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M4.98 3.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5ZM3 21h4V9H3v12Zm7 0h4v-6.2c0-3.3 4-3.6 4 0V21h4v-7.5c0-6.2-7-6-8-3V9h-4v12Z" /></svg>
                              </a>
                              <a href="mailto:fu.shih@northeastern.edu" className="w-9 h-9 rounded-full border border-stone-200 flex items-center justify-center text-stone-600 hover:bg-stone-100">
                                 <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="1.5"><rect x="2" y="4" width="20" height="16" rx="2" /><path d="m22 6-10 7L2 6" /></svg>
                              </a>
                           </div>
                        </div>
                        <div className="md:col-span-5">
                           <h2 className="text-2xl md:text-3xl font-light text-stone-800 mb-6">About Me</h2>
                           <div className="space-y-4 text-stone-500 leading-relaxed text-sm">
                              <p>Born in Taiwan, lived and grew up in the expat community in Suzhou, China, surrounded by different cultures, languages, and creative influences. That early exposure shaped how I see the world and eventually led me to study design in the US.</p>
                              <p>I later moved to New York City, where I earned my BFA in Communication Design at Parsons School of Design. There, I learned design thinking as a way to approach problems, focusing on understanding people, embracing ambiguity, and turning complexity into clarity.</p>
                              <p>I'm now based in Oakland, California, completing my MS in Information Systems and exploring the technical side of building products, from systems to code and how thoughtful design sits at the intersection.</p>
                           </div>
                           <div className="mt-8">
                              <h3 className="text-base font-light text-stone-700 mb-4">When I'm not on Figma...</h3>
                              <div className="flex gap-6">
                                 {hobbies.map(function (h, i) {
                                    return (
                                       <div key={i} className="group text-center">
                                          <div className="w-12 h-12 mx-auto flex items-center justify-center transition-transform hover:scale-110">
                                             <img src={h.img} alt={h.name} className="w-full h-full object-contain" />
                                          </div>
                                          <p className="text-xs font-medium mt-2" style={{ color: h.color }}>{h.name}</p>
                                       </div>
                                    );
                                 })}
                              </div>
                           </div>
                        </div>
                        <div className="md:col-span-4 md:pt-12">
                           <WhatIWorkOnCard />
                        </div>
                     </div>
                  </section>

                  <GardenSection />

                  <footer className="px-4 sm:px-8 md:px-16 py-12 border-t border-stone-200">
                     <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                        <div><p className="text-stone-400 text-sm mb-1">Let's work together</p><a href="mailto:fu.shih@northeastern.edu" className="text-stone-800 hover:text-stone-500">fu.shih@northeastern.edu</a></div>
                        <div className="flex gap-6 text-sm text-stone-400"><a href="https://linkedin.com/in/shihjufu" target="_blank" className="hover:text-stone-600">LinkedIn</a><a href="https://drive.google.com/file/d/1Kfp2ui2orbGl-xPLTVLjLMSrF4FuFbaX/view" target="_blank" className="hover:text-stone-600">Resume</a></div>
                     </div>
                     <p className="mt-12 text-stone-300 text-sm italic text-center">Great design is always hidden in plain sight.</p>
                  </footer>
               </div>
            </TooltipContext.Provider>
         );
      }

      ReactDOM.render(React.createElement(App), document.getElementById('root'));
   </script>
</body>

</html>
